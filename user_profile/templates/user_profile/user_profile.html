<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="static/css/user_profile.css" />
    <script src="static/js/user_profile.js" defer></script>
    <title>Document</title>
  </head>

  <body>
    <div class="sidebar close">
      <a href="{{ url_for('index') }}" target="_self" class="logo">
        <i class="bx bx-trip"></i>
        <div class="logo-name"><span>Travel</span>Tracer</div>
      </a>

      <ul class="side-menu">
        <li class="active">
          <a id="profile"><i class="bx bx-user"></i>Profile</a>
        </li>
        <li>
          <a id="visited"><i class="bx bx-been-here"></i>Visited</a>
        </li>
        <li>
          <a id="achievements"><i class="bx bx-star"></i>Achievements</a>
        </li>
        <li>
          <a id="friends"><i class="bx bx-face"></i>Friends</a>
        </li>
        <li>
          <a id="settings"><i class="bx bx-cog"></i>Settings</a>
        </li>
      </ul>

      <ul class="side-menu">
        <li>
          <a href="{{ url_for('reglog.logout') }}" class="logout"
            ><i class="bx bx-log-out"></i>Logout</a
          >
        </li>
      </ul>
    </div>

    <div class="content">
      <nav>
        <button class="bx bx-menu-alt-left"></button>
        <h3>Menu</h3>

        <a href="{{ url_for('index') }}" class="home-button"
          >Home<i class="bx bx-home-alt"></i
        ></a>
      </nav>

      <div class="container">
        {% for message in get_flashed_messages() %}
        <div style="position: relative; top: 10px" class="alert alert-warning">
          <button type="button" class="close">&times;</button>
          {{ message }}
        </div>
        {% endfor %}
      </div>

      <div id="profile" class="">
        <div class="profile-header">
          <!-- profile header row start red-->
          <div
            style="display: flex; flex-direction: row; flex-wrap: wrap"
            class="profile-info"
          >
            <!-- profile info row start  green-->
            <div>
              <!-- profile avatar col  blue-->
              {% if user_info["avatar"] %}
              <img
                class="profile-picture"
                src="static/images/{{ user_info['avatar'] }}"
                alt="Profile Picture"
              />
              {% else %}
              <img
                class="profile-picture"
                src="static/images/avatar.png"
                alt="Profile Picture"
              />
              {% endif %}
            </div>
            <div>
              <!-- profile info col blue-->
              <div style="display: flex; flex-direction: row">
                <!-- real name row-->
                {% if user_info["first_name"] or user_info["last_name"] %}
                <h1>
                  {{ user_info["first_name"] }} {{ user_info["last_name"] }}
                </h1>
                {% else %}
                <h1>" "</h1>
                {% endif %}
                <h3
                  id="edit-profile-settings"
                  style="right: 0; padding-right: 40px; position: fixed"
                >
                  Edit profile<i
                    style="position: relative; top: 5px"
                    class="bx bx-cog"
                  ></i>
                </h3>
              </div>
              <div>
                <!-- username row -->
                {% if user_info["username"] %}
                <p style="margin-bottom: 15px">@{{ user_info["username"] }}</p>
                {% else %}
                <p style="margin-bottom: 15px">"@ "</p>
                {% endif %}
              </div>
              <div
                style="
                  display: flex;
                  flex-direction: row;
                  flex-wrap: wrap;
                  gap: 30px;
                  margin-bottom: 15px;
                "
              >
                <!-- data label row-->
                <div>
                  <p>visited list</p>

                  {% if user_info["visited"] %}
                  <p>{{ user_info["visited"] }}</p>
                  {% else %}
                  <p>0</p>
                  {% endif %}
                </div>
                <div>
                  <p>wishlist</p>

                  {% if user_info["wishlist"] %}
                  <p>{{ user_info["wishlist"] }}</p>
                  {% else %}
                  <p>0</p>
                  {% endif %}
                </div>
                <div>
                  <p>friends</p>

                  {% if friend_amount["friends"] %}
                  <p>{{ friend_amount["friends"] }}</p>
                  {% else %}
                  <p>0</p>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>
          <!-- profile info row end-->
        </div>
        <!-- profile header end-->

        <div><!-- profile body start--></div>
        <!-- profile body end-->

        <div id="edit-profile-settings" class="modal">
          <!-- Edit profile settings-->
          <div class="modal-content">
            <div style="display: flex; flex-direction: row">
              <h1 style="text-align: center; flex-grow: 1">Settings</h1>
              <span style="text-align: end" class="close-modal">&times;</span>
            </div>
            <button id="changePassword" class="modal-button">
              Change Password
            </button>
            <button id="changeUsername" class="modal-button">
              Change Username
            </button>
            <div id="changePassword" class="content_info hidden">
              <p>Change Password</p>
              <form
                action="{{ url_for('user_profile.user_profileMain') }}"
                method="post"
              >
                {{ changePassForm.csrf_token }} {{
                changePassForm.oldPassword.label }} {{
                changePassForm.oldPassword() }} <br />
                {{ changePassForm.newPassword.label }} {{
                changePassForm.newPassword() }} <br />
                {{ changePassForm.verifyNewPassword.label }} {{
                changePassForm.verifyNewPassword() }} <br />
                {{ changePassForm.submitPasswordChange() }}
              </form>
            </div>
            <div id="changeUsername" class="content_info hidden">
              <p>Change Username</p>
              <form
                action="{{ url_for('user_profile.user_profileMain') }}"
                method="post"
              >
                {{ changeUserForm.csrf_token }} {{
                changeUserForm.newUsername.label }} {{
                changeUserForm.newUsername() }} <br />
                {{ changeUserForm.newFirstName.label }} {{
                changeUserForm.newFirstName() }} <br />
                {{ changeUserForm.newLastName.label }} {{
                changeUserForm.newLastName() }} <br />
                {{ changeUserForm.password.label }} {{ changeUserForm.password()
                }}
                <br />
                {{ changeUserForm.submitUsernameChange() }}
              </form>
            </div>
          </div>
        </div>
      </div>

      <div id="visited" class="hidden">
        <h1 style="text-align: center">
          This is a list of all the sights you have visited.
        </h1>
        <table class="table table-striped">
          <thead>
            <tr>
              <th scope="col">Country</th>
              <th scope="col">City</th>
              <th scope="col">Sight</th>
              <th scope="col">Date</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th scope="row">Norway</th>
              <td>Tromso</td>
              <td>Polaria</td>
              <td>3-mar-2024</td>
            </tr>
            <tr>
              <th scope="row">Norway</th>
              <td>Tromso</td>
              <td>Restaurant Smak</td>
              <td>1-mar-2024</td>
            </tr>
            <tr>
              <th scope="row">Norway</th>
              <td>Tromso</td>
              <td>Domkirke</td>
              <td>29-feb-2024</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div id="achievements" class="hidden">
        <h1 style="text-align: center">Achievements</h1>
        <table class="table table-striped">
          <thead>
            <tr>
              <th scope="col">Name</th>
              <th scope="col">Icon</th>
              <th scope="col">Description</th>
              <th scope="col">Status</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th scope="row">Basic</th>
              <td>Icon</td>
              <td>Has been at least 1 sight</td>
              <td>Finished</td>
            </tr>
            <tr>
              <th scope="row">Silver</th>
              <td>Icon</td>
              <td>Has been at least 10 sights</td>
              <td>7/10</td>
            </tr>
            <tr>
              <th scope="row">Gold</th>
              <td>Icon</td>
              <td>Has been to 50 sights</td>
              <td>7/50</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div id="friends" class="hidden">
        <h2 style="text-align: center">Friend request</h2>
        <table class="table table-striped">
          <thead>
            <tr>
              <th scope="col">Number</th>
              <th scope="col">Username</th>
              <th scope="col">First name</th>
              <th scope="col">Last name</th>
              <th scope="col">Option</th>
            </tr>
          </thead>
          <tbody>
            {% set ns_01 = namespace(number=1) %} {% for friend_request in
            friend_requests %}
            <tr>
              {% if friend_request %}
              <th scope="row">{{ ns_01.number }}</th>
              {% set ns_01.number = ns_01.number + 1 %}
              <td>{{ friend_request["username"] }}</td>
              {% if friend_request["show_real_name"] %}
              <td>{{ friend_request["first_name"] }}</td>
              <td>{{ friend_request["last_name"] }}</td>
              {% else %}
              <td style="color: grey">Name is hidden</td>
              <td style="color: grey">Name is hidden</td>
              {% endif %} {% endif %}
              <td>
                <button class="accept-button" onclick="">Accept</button>
                <button class="decline-button" onclick="">Decline</button>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>

        <h2 style="text-align: center">Friendlist</h2>
        <table class="table table-striped">
          <thead>
            <tr>
              <th scope="col">Number</th>
              <th scope="col">Username</th>
              <th scope="col">First name</th>
              <th scope="col">Last name</th>
              <th scope="col">Option</th>
            </tr>
          </thead>
          <tbody>
            {% set ns_02 = namespace(number=1) %} {% for friend in friend_list
            %}
            <tr>
              {% if friend %}
              <th scope="row">{{ ns_02.number }}</th>
              {% set ns_02.number = ns_02.number + 1 %}
              <td>{{ friend["username"] }}</td>
              {% if friend["show_real_name"] %}
              <td>{{ friend["first_name"] }}</td>
              <td>{{ friend["last_name"] }}</td>
              {% else %}
              <td style="color: grey">Name is hidden</td>
              <td style="color: grey">Name is hidden</td>
              {% endif %} {% endif %}
              <td>
                <button class="remove-button" onclick="">Remove</button>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      <div id="settings" class="content_info hidden"></div>
    </div>

    <script>
      // This script is used to get the "accept" and "decline" buttons to work
    </script>
  </body>
</html>
