{% extends "base.html" %} {% block head %}

<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link
  href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
  rel="stylesheet"
/>
<link
  rel="stylesheet"
  type="text/css"
  href="{{ url_for('.static', filename='css/sight.css') }}"
/>

<script src="{{ url_for('.static', filename='js/toggle-description.js') }}"></script>

{% endblock %} {% block title %} {{ sight.name }} {% endblock %} {% block
content %}
<div id="img-backgroud"></div>

<div class="header">
  <h1>{{ sight.name }}</h1>
  <div class="header-buttons">

    {% if current_user.is_authenticated %}

      <a class="header-button" href="#">Visited</a>

      {% if in_wishlist %}
        <a class="header-button" id="wishlist-button" href="{{ url_for('sight.remove_from_wishlist', sight_id=sight.id, next=url_for('sight.sight_details', sight_id=sight.id)) }}">Added to wishlist <i class="bx bx-heart"></i></a>
      {% else %}
        <a class="header-button" id="wishlist-button" href="{{ url_for('sight.add_to_wishlist', sight_id=sight.id, next=url_for('sight.sight_details', sight_id=sight.id)) }}">Add to wishlist <i class="bx bx-heart"></i></a>
      {% endif %}

    {% else %}

      <a class="header-button" href="{{ url_for('reglog.login') }}">Visited</a>

      <a
        class="header-button"
        id="wishlist-button"
        href="{{ url_for('reglog.login') }}"
        >Add to wishlist <i class="bx bx-heart"></i
      ></a>

    {% endif %}

  </div>
</div>

<div class="image-container">
  <button onclick="prevImage()" class="button-left">
    <div class="arrow-wrapper-left">
      <div class="arrow-left"></div>
    </div>
    Prev
  </button>

  <img id="image1" src="" alt="Image" />
  <img id="image2" src="" alt="Image" />

  <button onclick="nextImage()" class="button-right">
    Next
    <div class="arrow-wrapper-right">
      <div class="arrow-right"></div>
    </div>
  </button>
</div>

<div class="content">
  <div class="text">
    <h3>
      <img
        src="{{ url_for('.static', filename='images/information.svg') }}"
        alt="info"
        height="20"
        width="20"
      />
      About
    </h3>

    <p class="sight-description">
      {% if sight.description is not none %} {{ sight.description }}
      <span class="sight-description-gradient-container">
        <button class="sight-description-button" onclick="toggleDescription();">
          ...Show more
        </button>
      </span>
      {% else %} No description {% endif %}
    </p>

    <p>
      <img
        src="{{ url_for('.static', filename='images/ages.svg') }}"
        alt="ages"
        height="20"
        width="20"
      />
      {{ sight.age_category }}
    </p>

    <p>
      <img
        src="{{ url_for('.static', filename='images/star.svg') }}"
        alt="star"
        height="20"
        width="20"
      />
      {% if sight.achievements %} Achievements: {% for achievement in
      sight.achievements %}
      <img
        src="{{ url_for('static', filename='images/achievement/' + achievement.icon) }}"
        alt="{{ achievement.name }}"
        title="{{ achievement.name }}"
        height="36"
        width="36"
      />
      {% endfor %} {% else %} No achievements {% endif %}
    </p>
    <p>
      <img
        src="{{ url_for('.static', filename='images/clock.svg') }}"
        alt="clock"
        height="20"
        width="20"
      />
      Opening hours: {% if sight.open_time is none or sight.close_time is none
      %} 24/7 {% else %} {{ sight.open_time.strftime('%H:%M') }} - {{
      sight.close_time.strftime('%H:%M') }} {% endif %} {% if is_open %}
      <span class="open">Open</span>
      {% else %}
      <span class="close">Closed</span>
      {% endif %}
    </p>
    <p>
      <img
        src="{{ url_for('.static', filename='images/map-marker.svg') }}"
        alt="map-marker"
        height="20"
        width="20"
      />
      Address: {{ sight.address }}
    </p>
  </div>

  <div class="map">
    <iframe
      src="{{ sight.google_maps_url }}"
      width="600"
      height="450"
      style="border: 0"
      allowfullscreen=""
      loading="lazy"
      referrerpolicy="no-referrer-when-downgrade"
    ></iframe>
  </div>
</div>

<div class="button-container">
  <a href="{{ url_for('sight.sights') }}"
    ><button class="back-button">Back</button></a
  >
</div>

<!-- Javascript for button-left and button-right -->
<script>
  var images = {{ images | safe }};
  var index1 = 0;
  var index2 = 1;

  function showImage(index) {
    var imageElement1 = document.getElementById("image1");
    var imageElement2 = document.getElementById("image2");

    if (index < 0) {
      index = images.length - 1;
    } else if (index >= images.length) {
      index = 0;
    }
    index1 = index;
    index2 = (index1 + 1) % images.length;
    imageElement1.src = images[index1];
    imageElement2.src = images[index2];
  }

  function prevImage() {
    index1 = (index1 - 1 + images.length) % images.length;
    index2 = (index2 - 1 + images.length) % images.length;
    document.getElementById("image1").src = images[index1];
    document.getElementById("image2").src = images[index2];
  }

  function nextImage() {
    index1 = (index1 + 1) % images.length;
    index2 = (index2 + 1) % images.length;
    document.getElementById("image1").src = images[index1];
    document.getElementById("image2").src = images[index2];
  }

  showImage(0);
</script>

{% endblock %}
